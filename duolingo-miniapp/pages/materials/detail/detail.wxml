<view class="page">
  <view class="top-bar">
    <text class="back-btn" bindtap="handleBack">←</text>
    <text class="page-title">课程</text>
    <view class="spacer"></view>
  </view>

  <scroll-view class="content" scroll-y="true">
    <view class="header">
      <text class="main-title">{{lessonTitle}}</text>
      <text class="main-subtitle">老师上传的课件、音频与视频</text>
    </view>

    <view class="state-text" wx:if="{{loading}}">加载中...</view>
    <view class="state-text error" wx:if="{{!loading && errorText}}">{{errorText}}</view>

    <view class="section" wx:if="{{!loading && !errorText}}">
      <text class="section-title">课件</text>
      <view class="empty-text" wx:if="{{files.length === 0}}">暂无课件</view>
      <view
        class="asset-row"
        wx:for="{{files}}"
        wx:key="id"
        data-id="{{item.id}}"
        data-type="{{item.type}}"
        bindtap="handleAssetTap"
      >
        <text class="asset-icon">{{item.icon}}</text>
        <view class="asset-main">
          <text class="asset-name">{{item.name}}</text>
          <text class="asset-meta">{{item.sizeText}}</text>
        </view>
        <text class="asset-action">打开</text>
      </view>
    </view>

    <view class="section" wx:if="{{!loading && !errorText}}">
      <text class="section-title">音频</text>
      <view class="empty-text" wx:if="{{audios.length === 0}}">暂无音频</view>
      <view
        class="asset-row"
        wx:for="{{audios}}"
        wx:key="id"
        data-id="{{item.id}}"
        data-type="{{item.type}}"
        bindtap="handleAssetTap"
      >
        <text class="asset-icon">{{item.icon}}</text>
        <view class="asset-main">
          <text class="asset-name">{{item.name}}</text>
          <text class="asset-meta">{{item.durationText}} · {{item.sizeText}}</text>
        </view>
        <text class="asset-action">播放</text>
      </view>
    </view>

    <view class="section" wx:if="{{!loading && !errorText}}">
      <text class="section-title">视频</text>
      <view class="empty-text" wx:if="{{videos.length === 0}}">暂无视频</view>
      <view
        class="asset-row"
        wx:for="{{videos}}"
        wx:key="id"
        data-id="{{item.id}}"
        data-type="{{item.type}}"
        bindtap="handleAssetTap"
      >
        <text class="asset-icon">{{item.icon}}</text>
        <view class="asset-main">
          <text class="asset-name">{{item.name}}</text>
          <text class="asset-meta">{{item.durationText}} · {{item.sizeText}}</text>
        </view>
        <text class="asset-action">观看</text>
      </view>
    </view>

    <view class="bottom-spacing"></view>
  </scroll-view>
</view>
