<!-- League - Sapphire Leaderboard -->
<view class="page">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <!-- <view class="top-bar">
    <text class="page-title">Sapphire League</text>
    <text class="close-btn" bindtap="handleClose">Ã—</text>
  </view> -->

  <!-- æ’åé€‰æ‹©å™¨ -->
  <view class="rank-selector">
    <view class="selector-label">æ’åæ–¹å¼:</view>
    <view class="selector-buttons">
      <view
        class="selector-btn {{rankType === 'class' ? 'active' : ''}}"
        bindtap="handleRankTypeChange"
        data-type="class"
      >
        ç­çº§
      </view>
      <view
        class="selector-btn {{rankType === 'campus' ? 'active' : ''}}"
        bindtap="handleRankTypeChange"
        data-type="campus"
      >
        æ ¡åŒº
      </view>
      <view
        class="selector-btn {{rankType === 'national' ? 'active' : ''}}"
        bindtap="handleRankTypeChange"
        data-type="national"
      >
        å…¨å›½
      </view>
    </view>
  </view>

  <!-- å‰ä¸‰åé˜¶æ¢¯å¼æ’åå±•ç¤º -->
  <view class="top-three-podium">
    <!-- ç¬¬äºŒå (å·¦) -->
    <view class="podium-item runner-up">
      <view class="podium-avatar" style="background-color: {{topThree[1].avatarColor}}">
        {{topThree[1].initial}}
      </view>
      <view class="podium-rank">2</view>
      <text class="podium-name">{{topThree[1].name}}</text>
      <text class="podium-hours">{{topThree[1].studyHours}}h</text>
    </view>

    <!-- ç¬¬ä¸€å (ä¸­) -->
    <view class="podium-item champion">
      <view class="podium-crown">ğŸ‘‘</view>
      <view class="podium-avatar" style="background-color: {{topThree[0].avatarColor}}">
        {{topThree[0].initial}}
      </view>
      <view class="podium-rank">1</view>
      <text class="podium-name">{{topThree[0].name}}</text>
      <text class="podium-hours">{{topThree[0].studyHours}}h</text>
    </view>

    <!-- ç¬¬ä¸‰å (å³) -->
    <view class="podium-item third-place">
      <view class="podium-avatar" style="background-color: {{topThree[2].avatarColor}}">
        {{topThree[2].initial}}
      </view>
      <view class="podium-rank">3</view>
      <text class="podium-name">{{topThree[2].name}}</text>
      <text class="podium-hours">{{topThree[2].studyHours}}h</text>
    </view>
  </view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <scroll-view class="leaderboard" scroll-y="true">
    <view class="leaderboard-header">
      <text class="rank-col">æ’å</text>
      <text class="user-col">ç”¨æˆ·</text>
      <text class="points-col">å­¦ä¹ æ—¶é•¿</text>
    </view>

    <view class="leaderboard-list">
      <!-- å½“å‰ç”¨æˆ·è¡Œ - é«˜äº®æ˜¾ç¤º -->
      <view class="leaderboard-row current-user" wx:for="{{[userRank]}}" wx:key="*this">
        <text class="rank-col">#{{userRank}}</text>
        <view class="user-info">
          <view class="user-avatar">{{userInitial}}</view>
          <text class="user-name">{{userName}}</text>
        </view>
        <text class="points-col">{{userStudyHours}}h</text>
      </view>

      <!-- å…¶ä»–ç”¨æˆ· -->
      <view class="leaderboard-row" wx:for="{{otherUsers}}" wx:key="id">
        <text class="rank-col">#{{item.rank}}</text>
        <view class="user-info">
          <view class="user-avatar" style="background-color: {{item.avatarColor}}">{{item.initial}}</view>
          <view class="user-details">
            <text class="user-name">{{item.name}}</text>
            <text class="user-level">Level {{item.level}}</text>
          </view>
        </view>
        <text class="points-col">{{item.studyHours}}h</text>
      </view>
    </view>

    <!-- åº•éƒ¨ç©ºç™½ -->
    <view class="leaderboard-bottom"></view>
  </scroll-view>
</view>
