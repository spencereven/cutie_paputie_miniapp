# 课程模块实现指南

## 项目背景

根据设计文件 `overview-ui.pen` 的要求，实现了课程模块，包含两个主要页面：

1. **课程目录页** (Node ID: `mLJNo`) - 课程列表展示
2. **课堂资料页** (Node ID: `CRc7l`) - 课程详细资料

## 页面一：课程目录 (`/pages/courses/list/`)

### 设计规格
- **页面标题**: "课程目录"
- **页面副标题**: "选择一节课查看课件、音频与视频"
- **课程卡片**: 水平布局，包含缩略图、标题、内容信息、更新时间
- **导航**: 顶部返回按钮 + 页面标题

### 文件说明

#### list.wxml
重构了原有的网格布局，改为水平卡片列表：
- 每张卡片包含：
  - **左侧**: 90×90 缩略图 + 播放图标
  - **中间**: 课程标题、内容统计 (课件/音频/视频数量)、更新时间
  - **右侧**: 导航箭头

#### list.js
- 模拟数据：3 节课程 (Lesson 1, 2, 3)
- 每节课包含：id、标题、内容信息、更新时间、缩略图 URL
- 点击课程卡片后导航到资料页：`/pages/materials/detail/detail?id={courseId}`

#### list.wxss
- 完全重新设计，使用 Flexbox 布局
- 色彩方案：#4A4A4A (深灰)、#8A8A8A (中灰)、#E6E6E6 (边框)
- 卡片样式：白色背景、圆角、下边框分隔
- 响应式：移动端 (≤375px) 的优化

### 功能特性
✅ 课程卡片展示
✅ 点击导航至课堂资料
✅ 响应式设计
✅ 色彩编码缩略图 (Lesson 1 蓝色，其他灰色)

## 页面二：课堂资料 (`/pages/materials/detail/`)

### 设计规格
- **页面标题**: "课堂资料"
- **页面副标题**: "老师上传的课件、音频与视频"
- **三个分区**:
  1. **课件 (Courseware)**: 文件图标 + 卡片 + 文件列表 + "查看全部"链接
  2. **音频 (Audio)**: 3 个音频播放器 (播放/进度/时长)
  3. **视频 (Video)**: 视频卡片 (缩略图 + 标题 + 时长)
- **导航**: 底部 5 个图标导航栏 (主页、奖杯、书籍-活跃、更多、文件夹)

### 文件说明

#### detail.wxml
创建了分区式布局，匹配设计规格 CRc7l：
- 头部：标题和副标题
- 课件分区：文件图标 + 文件列表 + CTA 链接
- 音频分区：3 个独立的音频播放器
- 视频分区：视频缩略图 + 播放按钮叠加层 + 视频信息
- 底部导航：5 个导航项

#### detail.js
- 音频状态管理：3 个音频播放器的状态数组
  ```javascript
  audioStates: [
    { isPlaying: false, progress: 0, duration: '0:12' },
    { isPlaying: false, progress: 0, duration: '0:08' },
    { isPlaying: false, progress: 0, duration: '0:15' }
  ]
  ```
- 音频进度模拟：0% → 100% (每 100ms 增加 2%)
- 多音频管理：同时只能播放一个，开始新音频时停止其他
- 返回按钮导航

#### detail.wxss
- 完整的样式设计：
  - 音频播放器：蓝色圆形按钮 + 波形进度条 + 时长显示
  - 视频卡片：缩略图 + 叠加层播放按钮
  - 底部导航：5 个图标项，书籍图标为活跃状态
  - 响应式适配

#### detail.json
- 页面配置：标题、导航栏样式、背景色

### 功能特性
✅ 课件文件列表
✅ 3 个交互式音频播放器
✅ 音频进度条可视化
✅ 播放/暂停切换
✅ 视频卡片 + 缩略图
✅ 底部导航栏
✅ 响应式设计

## 导航流程

```
首页 (Index)
    ↓ [点击课程卡片]
课程目录页 (课程目录 - mLJNo)
    ↓ [点击某节课]
课堂资料页 (课堂资料 - CRc7l)
    ↓ [返回按钮]
课程目录页
```

## 模拟数据

### 课程列表
```javascript
{
  id: 1,
  title: 'Lesson 1 · 课堂表达',
  contentInfo: '课件 3 · 音频 5 · 视频 1',
  updateTime: '更新于 今天',
  thumbnailUrl: 'https://via.placeholder.com/90x90/E5F6FF/2CB7FF?text=▶'
}
```

### 课堂资料
- **课件**: PPT、讲义、习题
- **音频**: 3 个播放器，时长分别为 0:12、0:08、0:15
- **视频**: "课堂讲解 · 第1部分"，时长 6:12

## 设计匹配度

| 项目 | 状态 | 说明 |
|------|------|------|
| 字体排版 | ✅ | 字号、粗细与设计一致 |
| 色彩方案 | ✅ | #4A4A4A、#8A8A8A、#2CB7FF、#E6E6E6 |
| 间距布局 | ✅ | 内边距、间隔符合设计规格 |
| 布局样式 | ✅ | 水平卡片 → 垂直分区 |
| 图标替代 | ✅ | 使用 emoji (📄 🎤 ▶ 🏠 🏆 📚 ⋯ 📁) |
| 响应式适配 | ✅ | 移动端优化 (≤375px) |

## 交互功能

### 课程列表
1. **点击课程卡片**: 导航到该课程的资料页
2. **返回按钮**: 返回前一页

### 课堂资料
1. **音频播放**:
   - 点击播放按钮切换播放/暂停
   - 播放时显示进度条 (0-100%)
   - 同时只能播放一个音频
2. **返回按钮**: 返回课程列表
3. **底部导航**: 显示 5 个导航按钮 (可扩展)

## 技术栈

- **框架**: 微信小程序 (WeChat Mini App)
- **语言**: WXML (标记) + WXSS (样式) + JavaScript
- **组件**: view、scroll-view、image、text、input
- **特性**: 数据绑定、事件处理、条件渲染、列表循环

## 文件大小统计

```
课程列表页:
  - list.wxml   1.5 KB
  - list.js     1.5 KB
  - list.wxss   2.9 KB
  - list.json   124 B

课堂资料页:
  - detail.wxml 4.4 KB
  - detail.js   2.2 KB
  - detail.wxss 6.0 KB
  - detail.json 161 B
```

## 测试清单

### 视觉测试
- [ ] 与设计文件对比截图 (mLJNo、CRc7l)
- [ ] 验证响应式断点 (390px、375px)
- [ ] 检查色彩准确度
- [ ] 确认字体大小和粗细

### 功能测试
- [ ] 课程列表显示 3 节课
- [ ] 点击课程卡片跳转到资料页
- [ ] 音频播放器播放/暂停功能
- [ ] 返回按钮返回正确页面
- [ ] 底部导航显示正常

### 性能测试
- [ ] 滚动列表平滑流畅
- [ ] 音频进度条更新流畅 (100ms 间隔)
- [ ] 点击交互无延迟

## 未来增强方向

- 📁 实际音频文件集成 (wx.createInnerAudioContext)
- 🎬 真实视频播放支持
- 📄 PDF 查看器集成
- 📊 进度跟踪功能
- 💾 资料下载功能
- 📝 用户笔记 & 书签

## 常见问题 (FAQ)

**Q: 音频不会真正播放吗？**
A: 目前是模拟播放，显示进度条动画。后续可集成真实音频文件。

**Q: 如何添加更多课程？**
A: 在 `list.js` 的 `mockCourses` 数组中添加新课程对象即可。

**Q: 底部导航按钮可以点击吗？**
A: 目前是静态显示，可根据需求添加点击事件和导航逻辑。

**Q: 如何自定义色彩？**
A: 在 `*.wxss` 文件中修改 CSS 变量或直接改变颜色值。

---
**实现日期**: 2026-02-11
**状态**: ✅ 完成，可用于测试
